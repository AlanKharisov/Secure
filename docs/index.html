<!doctype html>
<html lang="uk">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>MARKI Secure ‚Äî Demo</title>
    <link rel="stylesheet" href="styles.css">
    <!-- –ø–æ—Ä—è–¥–æ–∫: firebase -> auth-ui -> qrcode -> app -->
    <script type="module" src="firebase.js"></script>
    <script defer src="auth-ui.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
    <script defer src="app.js"></script>
    <script defer src="config.js"></script>
</head>
<body>
<div class="app">
    <header class="topbar">
        <div class="brand">
            <div class="logo"></div>
            <div class="name">
                <h1>MARKI Secure</h1>
                <p>QR ‚Üí –¥–µ—Ç–∞–ª—ñ –ø—Ä–æ–¥—É–∫—Ç—É</p>
            </div>
        </div>
        <nav class="tabs">
            <button class="tab active" data-tab="userPane">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á</button>
            <button class="tab" data-tab="manPane">–í–∏—Ä–æ–±–Ω–∏–∫</button>

            <a class="cartbtn" href="cart.html">üõí –ö–æ—à–∏–∫ <span id="cartCount">0</span></a>

            <!-- AUTH UI -->
            <div class="authbox">
                <img id="authPhoto" class="avatar" alt="" style="display:none">
                <span id="authEmail" class="muted" title=""></span>
                <span id="roleBadges" class="muted small" style="margin-left:6px"></span>
                <button id="loginBtn"  class="btn">–£–≤—ñ–π—Ç–∏</button>
                <button id="logoutBtn" class="btn ghost" style="display:none">–í–∏–π—Ç–∏</button>
                <a id="accountLink" href="account.html" class="btn ghost" style="display:none">–ú—ñ–π –∞–∫–∞—É–Ω—Ç</a>

                <div id="authPanel" class="auth-panel hidden">
                    <button id="gLogin" class="btn wide">–£–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑ Google</button>
                    <div class="muted small center" style="margin:6px 0">–∞–±–æ email</div>
                    <input id="email" class="auth-input" placeholder="email">
                    <input id="password" class="auth-input" placeholder="–ø–∞—Ä–æ–ª—å" type="password">
                    <div class="row" style="gap:8px">
                        <button id="emailSignIn" class="btn">–í—Ö—ñ–¥</button>
                        <button id="emailSignUp" class="btn ghost">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</button>
                    </div>
                    <div id="authErr" class="result bad" style="display:none; margin-top:8px"></div>
                </div>
            </div>
        </nav>
    </header>

    <main class="container">
        <!-- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á -->
        <section id="userPane" class="tabpane active">
            <div class="card">
                <h2>–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç (–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á)</h2>
                <form id="userCreateForm" class="form">
                    <div class="form-grid">
                        <div class="field">
                            <label>–ù–∞–∑–≤–∞*</label>
                            <input name="name" placeholder="–ù–∞–ø—Ä., Organic Milk 1L" required>
                        </div>
                        <div class="field">
                            <label>–î–∞—Ç–∞ –≤–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—è* (YYYY-MM-DD)</label>
                            <input name="manufacturedAt" placeholder="2025-09-03" required>
                            <div class="muted small">–û–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</div>
                        </div>
                        <div class="field">
                            <label>–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è (URL)</label>
                            <input name="image" placeholder="https://...">
                        </div>
                    </div>
                    <div class="actions">
                        <button class="btn primary">–°—Ç–≤–æ—Ä–∏—Ç–∏</button>
                    </div>
                </form>
            </div>

            <div class="card">
                <h3>–ú–æ—ó —Ç–æ–≤–∞—Ä–∏</h3>
                <div class="tablewrap">
                    <table class="table">
                        <thead>
                        <tr>
                            <th>TokenId</th><th>–ù–∞–∑–≤–∞</th><th>–°–µ—Ä—ñ–π–Ω–∏–π</th><th>Edition</th><th>–°—Ç–∞–Ω</th><th>–î—ñ—ó</th>
                        </tr>
                        </thead>
                        <tbody id="userList"><tr><td colspan="6" class="muted">–£–≤—ñ–π–¥—ñ—Ç—å</td></tr></tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- –í–∏—Ä–æ–±–Ω–∏–∫ -->
        <section id="manPane" class="tabpane">
            <div class="card">
                <h2>–ú–∞—Å–æ–≤–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è (–í–∏—Ä–æ–±–Ω–∏–∫)</h2>
                <form id="manCreateForm" class="form">
                    <div class="form-grid">
                        <div class="field">
                            <label>–ù–∞–∑–≤–∞*</label>
                            <input name="name" required placeholder="Coke Zero 330ml">
                        </div>
                        <div class="field">
                            <label>–ö—ñ–ª—å–∫—ñ—Å—Ç—å (1‚Äì100)</label>
                            <input name="qty" type="number" min="1" max="100" value="1">
                        </div>
                        <div class="field">
                            <label>–ë—Ä–µ–Ω–¥ (slug –∞–±–æ –Ω–∞–∑–≤–∞)</label>
                            <input name="brand" placeholder="COCA-COLA">
                            <div class="muted small">–ì–∞–ª–æ—á–∫–∞ –∑‚Äô—è–≤–∏—Ç—å—Å—è, —è–∫—â–æ –±—Ä–µ–Ω–¥ –≤–µ—Ä–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π</div>
                        </div>
                        <div class="field">
                            <label>Base serial (–Ω–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ)</label>
                            <input name="serial" placeholder="COKE-ZERO-330ML">
                            <div class="muted small">–ë—É–¥–µ: COKE-ZERO-330ML-001, 002, ‚Ä¶</div>
                        </div>
                        <div class="field">
                            <label>–î–∞—Ç–∞ –≤–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—è</label>
                            <input name="manufacturedAt" placeholder="2025-09-03">
                        </div>
                        <div class="field">
                            <label>IPFS Hash (–Ω–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ)</label>
                            <input name="ipfsHash" placeholder="...">
                        </div>
                        <div class="field">
                            <label>–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è (URL)</label>
                            <input name="image" placeholder="https://...">
                        </div>
                    </div>
                    <div class="actions">
                        <button class="btn primary">–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∞—Ä—Ç—ñ—é</button>
                    </div>
                </form>
            </div>

            <div class="card">
                <h3>–í—Å—ñ –ø—Ä–æ–¥—É–∫—Ç–∏</h3>
                <div class="tablewrap">
                    <table class="table">
                        <thead>
                        <tr>
                            <th>TokenId</th><th>–ù–∞–∑–≤–∞</th><th>–°–µ—Ä—ñ–π–Ω–∏–π</th>
                            <th>Edition</th><th>–ë—Ä–µ–Ω–¥</th><th>–°—Ç–∞–Ω</th><th>–î—ñ—ó</th>
                        </tr>
                        </thead>
                        <tbody id="manList"><tr><td colspan="7" class="muted">–£–≤—ñ–π–¥—ñ—Ç—å —è–∫ –≤–∏—Ä–æ–±–Ω–∏–∫</td></tr></tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">¬© 2025 MARKI Secure (Demo)</footer>
</div>

<!-- QR –º–æ–¥–∞–ª -->
<div id="qrModal" class="qr-panel" role="dialog" aria-modal="true">
    <div class="qr-card">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
            <div class="mono" id="qrTitle">QR</div>
            <button id="qrClose" class="btn">–ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
        <div id="qrNode"></div>
        <div class="row" style="margin-top:10px;gap:8px">
            <button id="qrDownload" class="btn">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ PNG</button>
            <button id="qrCopyUrl" class="btn ghost">–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ URL</button>
        </div>
    </div>
</div>
</body>
</html>
