<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <title>MARKI Secure ‚Äî –ö–∞–±—ñ–Ω–µ—Ç</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="/styles.css" />

  <!-- DEBUG App Check token (DEV ONLY) -->
  <script>
    self.FIREBASE_APPCHECK_DEBUG_TOKEN = "2e3716fb-038e-4ca9-9592-44742d555191";
  </script>
</head>
<body class="mk-dashboard">
<div class="app-shell">

  <!-- TOP BAR -->
  <header class="topbar">
    <div class="topbar-left">
      <div class="brand-pill">
        <span class="brand-dot"></span>
        <span class="brand-name">MARKI Secure</span>
      </div>
      <div class="topbar-page-title">
        <span class="muted small">–ü–∞–Ω–µ–ª—å –∫–µ—Ä—É–≤–∞–Ω–Ω—è</span>
        <h1>–û–≥–ª—è–¥ –∞–∫–∞—É–Ω—Ç–∞</h1>
      </div>
    </div>

    <div class="topbar-right">
      <div class="topbar-user">
        <div class="avatar-placeholder">MS</div>
        <div class="user-meta">
          <span id="topbarEmail" class="user-email muted">–ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π</span>
          <span id="topbarRole" class="user-role">–ì—ñ—Å—Ç—å</span>
        </div>
      </div>
      <div class="auth">
        <button id="loginBtn" class="btn">–£–≤—ñ–π—Ç–∏</button>
        <button id="logoutBtn" class="btn secondary hidden">–í–∏–π—Ç–∏</button>
      </div>
    </div>
  </header>

  <div class="shell-main">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="sidebar-section sidebar-main-nav">
        <div class="sidebar-title">–ù–∞–≤—ñ–≥–∞—Ü—ñ—è</div>
        <button class="nav-item active" data-nav="profile">
          <span class="nav-icon">üè†</span>
          <span>–û–≥–ª—è–¥</span>
        </button>
        <button class="nav-item" data-nav="company">
          <span class="nav-icon">üè≠</span>
          <span>–ö–æ–º–ø–∞–Ω—ñ—è</span>
        </button>
        <button class="nav-item" data-nav="admin" style="display:none">
          <span class="nav-icon">üõ°</span>
          <span>–ê–¥–º—ñ–Ω</span>
        </button>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-title">–°—Ç–∞—Ç—É—Å</div>
        <div class="sidebar-status">
          <div class="status-line">
            <span class="muted small">–ë—Ä–µ–Ω–¥</span>
            <span class="tag tag-pill" id="sidebarBrandTag">–Ω–µ–º–∞—î</span>
          </div>
          <div class="status-line">
            <span class="muted small">–†–æ–ª—å</span>
            <span class="tag tag-pill" id="sidebarRoleTag">user</span>
          </div>
          <div class="status-line">
            <span class="muted small">–ó–∞—è–≤–∫–∞ –∫–æ–º–ø–∞–Ω—ñ—ó</span>
            <span class="tag tag-pill tag-pending" id="sidebarAppTag">‚Äî</span>
          </div>
        </div>
      </div>

      <div class="sidebar-section sidebar-footer">
        <div class="muted tiny">¬© MARKI Secure</div>
        <div class="muted tiny">v1.0 ¬∑ Firestore backend</div>
      </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="dashboard">

      <!-- PROFILE VIEW -->
      <section class="view" data-view="profile">
        <!-- KPI ROW -->
        <div class="kpi-row">
          <div class="kpi-card card">
            <div class="kpi-label">–ú–æ—ó –ø—Ä–æ–¥—É–∫—Ç–∏</div>
            <div class="kpi-value" id="kpiMyProducts">‚Äî</div>
            <div class="kpi-footer muted small">–£—Å—ñ —Ç–æ–∫–µ–Ω–∏, –¥–µ –≤–∏ –≤–ª–∞—Å–Ω–∏–∫</div>
          </div>
          <div class="kpi-card card">
            <div class="kpi-label">–¢–æ–≤–∞—Ä–∏ –∫–æ–º–ø–∞–Ω—ñ—ó</div>
            <div class="kpi-value" id="kpiCompanyProducts">‚Äî</div>
            <div class="kpi-footer muted small">–°—Ç–≤–æ—Ä–µ–Ω—ñ —è–∫ –≤–∏—Ä–æ–±–Ω–∏–∫</div>
          </div>
          <div class="kpi-card card">
            <div class="kpi-label">–ü–∞—Ä—Ç—ñ—ó</div>
            <div class="kpi-value" id="kpiBatches">‚Äî</div>
            <div class="kpi-footer muted small">–í–∞—à—ñ –≤–∏—Ä–æ–±–Ω–∏—á—ñ –ø–∞—Ä—Ç—ñ—ó</div>
          </div>
        </div>

        <div class="grid-2 layout-gap">
          <!-- LEFT COLUMN -->
          <div>
            <!-- Profile card (JS –Ω–∞–ø–æ–≤–Ω—é—î #profileBox) -->
            <div id="profileBox" class="card profile-card"></div>

            <!-- User products list -->
            <div class="card">
              <div class="card-header-row">
                <h3>–ú–æ—ó –ø—Ä–æ–¥—É–∫—Ç–∏</h3>
                <span class="muted small">–¢–æ–∫–µ–Ω–∏, —Å—Ç–≤–æ—Ä–µ–Ω—ñ —è–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á</span>
              </div>
              <div id="myProducts" class="list products-list"></div>
            </div>
          </div>

          <!-- RIGHT COLUMN -->
          <div class="right-column">
            <!-- Create user product -->
            <div class="card">
              <div class="card-header-row">
                <h3>–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç (–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á)</h3>
                <span class="muted small">–ë–µ–∑ –±—Ä–µ–Ω–¥—É, –¥–ª—è –æ—Å–æ–±–∏—Å—Ç–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è</span>
              </div>

              <form id="userProductForm" class="form">
                <div class="grid grid-2col">
                  <label>
                    –ù–∞–∑–≤–∞
                    <input name="name" required placeholder="–ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É" />
                  </label>
                  <label>
                    SKU
                    <input name="sku" placeholder="–ù–µ–æ–±–æ–≤ º—è–∑–∫–æ–≤–æ" />
                  </label>
                  <label>
                    –í–∏—Ä–æ–±–ª–µ–Ω–æ (YYYY-MM-DD)
                    <input name="manufacturedAt" placeholder="2025-01-01" />
                  </label>
                  <label>
                    –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è URL
                    <input name="image" placeholder="https://..." />
                  </label>
                  <label>
                    –ö—ñ–ª—å–∫—ñ—Å—Ç—å –µ–∫–∑–µ–º–ø–ª—è—Ä—ñ–≤
                    <input name="editionCount" type="number" min="1" value="1" />
                  </label>
                  <label>
                    –°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ (—á–µ—Ä–µ–∑ –∫–æ–º—É)
                    <input name="certificates" placeholder="ISO9001, CE" />
                  </label>
                </div>

                <div class="form-footer">
                  <button class="btn">–°—Ç–≤–æ—Ä–∏—Ç–∏</button>
                  <span id="userCreateMsg" class="muted small"></span>
                </div>
              </form>
            </div>
          </div>
        </div>
      </section>

      <!-- COMPANY VIEW -->
      <section class="view" data-view="company" style="display:none">
        <div class="section-title-row">
          <div>
            <h2>–ö–æ–º–ø–∞–Ω—ñ—è —Ç–∞ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–æ</h2>
            <p class="muted small">
              –ü–æ–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É –Ω–∞ –±—Ä–µ–Ω–¥, –∫–µ—Ä—É–π—Ç–µ –ø–∞—Ä—Ç—ñ—è–º–∏ —Ç–∞ —Ç–æ–≤–∞—Ä–∞–º–∏ –≤–∏—Ä–æ–±–Ω–∏–∫–∞.
            </p>
          </div>
        </div>

        <div class="grid-2 layout-gap">
          <!-- Apply company -->
          <div class="card">
            <div class="card-header-row">
              <h3>–ó–∞—è–≤–∫–∞ –Ω–∞ –∫–æ–º–ø–∞–Ω—ñ—é</h3>
              <span class="muted small">–î–∞–Ω—ñ –ø–æ—Ç—Ä–∞–ø–ª—è—Ç—å –¥–æ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó –∞–¥–º—ñ–Ω–æ–º</span>
            </div>

            <form id="companyForm" class="form">
              <div class="grid grid-2col">
                <label>–Ü–º º—è –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ—ó –æ—Å–æ–±–∏
                  <input name="fullName" required />
                </label>
                <label>Email –∫–æ–Ω—Ç–∞–∫—Ç–Ω–∏–π
                  <input name="contactEmail" type="email" required />
                </label>
                <label>–Æ—Ä–∏–¥–∏—á–Ω–∞ –Ω–∞–∑–≤–∞
                  <input name="legalName" required />
                </label>
                <label>–ë—Ä–µ–Ω–¥–æ–≤–∞ –Ω–∞–∑–≤–∞
                  <input name="brandName" placeholder="—è–∫ –Ω–∞ –µ—Ç–∏–∫–µ—Ç—Ü—ñ" />
                </label>
                <label>–ö—Ä–∞—ó–Ω–∞
                  <input name="country" />
                </label>
                <label>VAT
                  <input name="vat" />
                </label>
                <label>–†–µ—î—Å—Ç—Ä–∞—Ü—ñ–π–Ω–∏–π –Ω–æ–º–µ—Ä
                  <input name="regNumber" />
                </label>
                <label>–°–∞–π—Ç
                  <input name="site" placeholder="https://..." />
                </label>
                <label>–¢–µ–ª–µ—Ñ–æ–Ω
                  <input name="phone" />
                </label>
                <label>–ê–¥—Ä–µ—Å–∞
                  <input name="address" />
                </label>
              </div>

              <div class="upload-card card flat">
                <div class="row file-row">
                  <label class="file">
                    –î–æ–∫–∞–∑ –±—Ä–µ–Ω–¥—É (—Å–∫–∞–Ω/—Å–∫—Ä—ñ–Ω)
                    <input type="file" id="proofFile" accept="image/*,.pdf" />
                  </label>
                  <input type="hidden" name="proofUrl" />
                </div>
                <span id="applyMsg" class="muted small"></span>
              </div>

              <div class="form-footer">
                <button class="btn">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –∑–∞—è–≤–∫—É</button>
              </div>
            </form>
          </div>

          <!-- Batches + company products -->
          <div class="right-column">
            <div class="card">
              <div class="card-header-row">
                <h3>–ú–æ—ó –ø–∞—Ä—Ç—ñ—ó</h3>
                <span class="muted small">–û—Ä–≥–∞–Ω—ñ–∑—É–π—Ç–µ —Ç–æ–∫–µ–Ω–∏ –ø–æ –ø–∞—Ä—Ç—ñ—è—Ö</span>
              </div>
              <div id="myBatches" class="list"></div>

              <form id="batchForm" class="form-inline">
                <input name="title" placeholder="–ù–∞–∑–≤–∞ –Ω–æ–≤–æ—ó –ø–∞—Ä—Ç—ñ—ó‚Ä¶" />
                <button class="btn">–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∞—Ä—Ç—ñ—é</button>
              </form>
            </div>

            <div class="card">
              <div class="card-header-row">
                <h3>–¢–æ–≤–∞—Ä–∏ –∫–æ–º–ø–∞–Ω—ñ—ó</h3>
                <span class="muted small">–°—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –ø—ñ–¥ –≤–∞—à–∏–º –±—Ä–µ–Ω–¥–æ–º</span>
              </div>

              <div class="row filter-row">
                <input id="manuSkuFilter" placeholder="–§—ñ–ª—å—Ç—Ä –∑–∞ SKU" />
                <button id="manuSkuBtn" class="btn ghost">–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏</button>
              </div>

              <form id="companyProductForm" class="form mt">
                <div class="grid grid-2col">
                  <label>–ù–∞–∑–≤–∞
                    <input name="name" required />
                  </label>
                  <label>SKU
                    <input name="sku" />
                  </label>
                  <label>–í–∏—Ä–æ–±–ª–µ–Ω–æ (YYYY-MM-DD)
                    <input name="manufacturedAt" />
                  </label>
                  <label>–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è URL
                    <input name="image" placeholder="https://..." />
                  </label>
                  <label>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –µ–∫–∑–µ–º–ø–ª—è—Ä—ñ–≤
                    <input name="editionCount" type="number" min="1" value="1" />
                  </label>
                  <label>–°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ (—á–µ—Ä–µ–∑ –∫–æ–º—É)
                    <input name="certificates" />
                  </label>
                  <label>–ü–∞—Ä—Ç—ñ—è
                    <select name="batchId">
                      <option value="">‚Äî –±–µ–∑ –ø–∞—Ä—Ç—ñ—ó ‚Äî</option>
                    </select>
                  </label>
                </div>

                <div class="form-footer">
                  <button class="btn">–°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–æ–≤–∞—Ä(–∏)</button>
                  <span id="companyCreateMsg" class="muted small"></span>
                </div>
              </form>

              <div id="myProductsCompany" class="list products-list mt"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- ADMIN VIEW (–∑–∞—è–≤–∫–∏) -->
      <section class="view" data-view="admin" style="display:none">
        <div class="section-title-row">
          <div>
            <h2>–ú–æ–¥–µ—Ä–∞—Ü—ñ—è –∑–∞—è–≤–æ–∫ –∫–æ–º–ø–∞–Ω—ñ–π</h2>
            <p class="muted small">
              –î–æ—Å—Ç—É–ø–Ω–∞ —Ç—ñ–ª—å–∫–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º. –¢—É—Ç –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –∑–∞—è–≤–∫–∏ –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º <b>pending</b>.
            </p>
          </div>
        </div>

        <div class="card">
          <div class="card-header-row">
            <h3>–ó–∞—è–≤–∫–∏ –Ω–∞ –∫–æ–º–ø–∞–Ω—ñ—é</h3>
            <span class="muted small">–û—á—ñ–∫—É—é—Ç—å —Ä—ñ—à–µ–Ω–Ω—è</span>
          </div>
          <div id="adminApps" class="list admin-list"></div>
        </div>
      </section>

    </main>
  </div>
</div>

<!-- –°–ö–†–ò–ü–¢–ò -->
<script type="module" src="/firebase.js"></script>
<script type="module" src="/main.js"></script>
</body>
</html>
