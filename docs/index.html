<!doctype html>
<html lang="uk">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>MARKI Secure ‚Äî Demo</title>
    <link rel="stylesheet" href="styles.css">
    <!-- –ü–û–†–Ø–î–û–ö: firebase.js (module) ‚Üí auth-ui.js ‚Üí —ñ–Ω—à—ñ -->
    <script type="module" src="firebase.js"></script>
    <script defer src="auth-ui.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
    <script defer src="cart.js"></script>
    <script defer src="app.js"></script>
</head>
<body>
<div class="app">
    <header class="topbar">
        <div class="brand">
            <div class="logo"></div>
            <div class="name">
                <h1>MARKI Secure</h1>
                <p>–û–¥–∏–Ω QR ‚Üí —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –¥–µ—Ç–∞–ª–µ–π</p>
            </div>
        </div>
        <nav class="tabs">
            <button class="tab active" data-tab="manufacturer">–í–∏—Ä–æ–±–Ω–∏–∫</button>
            <button class="tab" data-tab="user">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á</button>

            <a class="cartbtn" href="cart.html">üõí –ö–æ—à–∏–∫ <span id="cartCount">0</span></a>

            <!-- AUTH UI -->
            <div class="authbox">
                <img id="authPhoto" class="avatar" alt="" style="display:none">
                <span id="authEmail" class="muted"></span>
                <button id="loginBtn"  class="btn">–£–≤—ñ–π—Ç–∏</button>
                <button id="logoutBtn" class="btn ghost" style="display:none">–í–∏–π—Ç–∏</button>
                <a id="accountLink" href="account.html" class="btn ghost" style="display:none">–ú—ñ–π –∞–∫–∞—É–Ω—Ç</a>

                <div id="authPanel" class="auth-panel hidden">
                    <button id="gLogin" class="btn wide">–£–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑ Google</button>
                    <div class="muted small center" style="margin:6px 0">–∞–±–æ email</div>
                    <input id="email" class="auth-input" placeholder="email">
                    <input id="password" class="auth-input" placeholder="–ø–∞—Ä–æ–ª—å" type="password">
                    <div class="row" style="gap:8px">
                        <button id="emailSignIn" class="btn">–í—Ö—ñ–¥</button>
                        <button id="emailSignUp" class="btn ghost">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</button>
                    </div>
                    <div id="authErr" class="result bad" style="display:none; margin-top:8px"></div>
                </div>
            </div>
        </nav>
    </header>

    <main class="container">
        <!-- –í–∏—Ä–æ–±–Ω–∏–∫ -->
        <section id="manufacturer" class="tabpane active">
            <div class="card">
                <h2>–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –ø—Ä–æ–¥—É–∫—Ç—É</h2>
                <form id="createForm" class="form">
                    <div class="field">
                        <label>–ù–∞–∑–≤–∞*</label>
                        <input name="name" id="name" placeholder="Organic Milk 1L" required />
                    </div>

                    <div class="row">
                        <div class="field">
                            <label>–°–µ—Ä—ñ–π–Ω–∏–π –Ω–æ–º–µ—Ä (–≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)</label>
                            <input name="serial" id="serial" readonly />
                        </div>
                        <div class="field">
                            <label>–î–∞—Ç–∞ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–∞</label>
                            <input name="date" type="date" />
                        </div>
                    </div>

                    <div class="field">
                        <label>URL –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)</label>
                        <input name="image" placeholder="" />
                    </div>

                    <div class="field">
                        <label>–°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ (—á–µ—Ä–µ–∑ –∫–æ–º—É)</label>
                        <input name="certificates" placeholder="ISO22000, HACCP" />
                    </div>

                    <div class="actions">
                        <button class="btn primary">–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç</button>
                        <button type="reset" class="btn ghost">–û—á–∏—Å—Ç–∏—Ç–∏</button>
                    </div>
                </form>
            </div>

            <div id="createdBlock" class="card hidden">
                <h3>–°—Ç–≤–æ—Ä–µ–Ω–æ</h3>
                <div class="created-body">
                    <div class="qrbox">
                        <div id="publicQR"></div>
                        <span>–ü—É–±–ª—ñ—á–Ω–∏–π QR (–¥–ª—è –µ—Ç–∏–∫–µ—Ç–∫–∏)</span>
                    </div>
                    <div class="meta">
                        <div><b>TokenId:</b> <span id="createdId"></span></div>
                        <div><b>–°—Ç–∞–Ω:</b> <span class="badge" id="createdState"></span></div>
                        <div class="mono"><b>–ü—É–±–ª—ñ—á–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è:</b> <span id="createdUrl"></span></div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>–°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤</h3>
                <div class="tablewrap">
                    <table class="table" id="productsTable">
                        <thead>
                        <tr>
                            <th>TokenId</th><th>–ù–∞–∑–≤–∞</th><th>–°–µ—Ä—ñ–π–Ω–∏–π</th><th>–°—Ç–∞–Ω</th><th>–î—ñ—ó</th>
                        </tr>
                        </thead>
                        <tbody id="productsBody">
                        <tr><td colspan="5" class="muted">–©–µ –Ω–µ–º–∞—î –ø—Ä–æ–¥—É–∫—Ç—ñ–≤</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á -->
        <section id="user" class="tabpane">
            <div class="card">
                <h2>–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î</h2>
                <p class="muted">
                    –°–∫–∞–Ω—É–π—Ç–µ QR –≤–∞—à–∏–º —Ç–µ–ª–µ—Ñ–æ–Ω–Ω–∏–º —Å–∫–∞–Ω–µ—Ä–æ–º ‚Äî –≤—ñ–Ω –≤—ñ–¥–∫—Ä–∏—î <code>details.html?id=‚Ä¶</code>.
                </p>
                <div class="row">
                    <div class="field">
                        <label>–í–≤–µ—Å—Ç–∏ TokenId –≤—Ä—É—á–Ω—É (–¥–ª—è —Ç–µ—Å—Ç—É)</label>
                        <input id="manualId" placeholder="–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 1">
                    </div>
                    <div style="align-self:end">
                        <button class="btn" id="openDetails">–í—ñ–¥–∫—Ä–∏—Ç–∏ –¥–µ—Ç–∞–ª—ñ</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">¬© 2025 MARKI Secure (Demo)</footer>
</div>
</body>
</html>